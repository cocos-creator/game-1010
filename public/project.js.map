{"version":3,"sources":["project.js"],"names":["require","e","t","n","r","s","o","u","a","i","f","Error","code","l","exports","call","length","AudioControl","module","Fire","_RFpush","play_finished","Audio_finished","Entity","find","audio","getComponent","AudioSource","play","play_bobo","Audio_bobo","_RFpop","Board","Cell","Cube","defineComponent","this","_tempGrid","delCubeRowList","delCubeColList","prop","HideInInspector","ObjectType","Vec2","Integer","getset","_createOrClean","value","create","clean","prototype","_board","widthX","size","x","spacing","widthY","y","len","count","entity","instantiate","parent","name","transform","position","cell","SpriteRenderer","addComponent","offset","onLoad","on","event","target","delline","bind","clearRow","clearCol","tempCell","tempDelCubeRowList","tempDelCubeColList","getCell","hasCube","push","destroy","Engine","isPlaying","FObject","_deferredDestroy","canPutCubeToCell","cubeGroup","center","j","_children","cube","pos","readyClear","Button","_btnRender","Sprite","sprite","normal","pressed","putCube","dispatchEvent","Event","CubeGroup","stopAnimation","thisTransform","thisGroup","camera","_creatThree","create3","_creatCubes","createRandom","clear","Box_9","Curved_3_0","Curved_3_90","Curved_3_180","Curved_3_270","Curved_5_0","Curved_5_90","Curved_5_180","Curved_5_270","Box_4","Box_1","Line_2_0","Line_2_90","Line_3_0","Line_3_90","Line_4_0","Line_4_90","Line_5_0","Line_5_90","_gridType","GridType","Enum","_select","gridType","blue","Color","yellow","red","lightblue","pink","orange","green","_Colors","Colors","startX","startY","isMouseUp","moveGrid","_color","color","Math","floor","random","grid","gridGroup","obj","scale","ran","ranGrid","move","moveX","moveY","CubeGroupPosition","screenPosition","wordPostion","screenToWorld","groupBorad","groupBoradPositions","group","xy","id","resetPosition","Game","Input","screenX","screenY","canPut","instance","putBoard","Camera","animation","Time","deltaTime","update","_play","playAnimation","_position","GameMenu","homeUUID","gameUUID","menu","btn_Menu","active","btn_Continue","btn_Restart","loadScene","btn_Home","gameOverRestart","gameOverHome","board","cubeGroupList","fraction","idleCellList","scoreText","_scoreValue","isJump","jumpFirst","tempCube","boardObj","cubeGroupObj","soceObj","BitmapText","jumpAnimation","w2l","getWorldToLocalMatrix","transformPoint","worldPosition","round","hasPutCube","curbCount","child","splice","addFraction","removeLine","updateIdleCellList","pass","gameOver","delCubeList","curFraction","lineNum","rowNum","colNum","text","scaleX","scaleY","groupList","grouplen","celllen","scoreBitmapText","gameOverBoard","isScore","MainMenu","btnPlay","Toggle","_tiggle","audio-clip","AudioClip","extend","Asset","RawType","get","AudioContext","getClipBuffer","getClipLength","getClipSamples","getClipChannels","getClipFrequency","createEntity","cb","ent","audioSource","clip","audio-legacy","loader","url","callback","document","createElement","addEventListener","src","load","UseWebAudio","window","webkitAudioContext","mozAudioContext","LoadManager","registerRawTypes","initSource","_audio","getCurrentTime","_playing","currentTime","updateTime","duration","updateMute","muted","mute","updateVolume","volume","updateLoop","loop","updateAudioClip","rawData","pause","stop","_paused","onPlayEnd","error","audio-source","Component","_startTime","_lastPlay","_buffSource","_volumeGain","onEnd","addComponentMenu","Object","defineProperty","set","_playbackRate","updatePlaybackRate","_clip","_loop","_mute","_volume","clamp","Range","onStart","onEnable","playOnAwake","onDisable","audio-web-audio","safeDecodeAudioData","context","buffer","timeout","timerId","setTimeout","MaxDecodeTime","decodeAudioData","decodedData","clearTimeout","onProgress","xhr","nativeAC","response","_loadFromXHR","NativeAudioContext","getPlayedTime","time","gain","isPaused","onended","ended","at","bufferSource","createBufferSource","createGain","connect","destination","playbackRate","start","numberOfChannels","sampleRate","sprite-animation-clip","SpriteAnimationClip","CustomAsset","_frameInfoFrames","addCustomAssetMenu","WrapMode","Default","Once","Loop","PingPong","ClampForever","StopAction","DoNothing","DefaultSprite","Hide","Destroy","FrameInfo","define","_frameRate","max","getTotalFrames","frames","frameInfos","getFrameInfoFrames","Array","totalFrames","sprite-animation-state","_binarySearch","array","h","m","_wrap","_value","_maxValue","_wrapMode","cnt","SpriteAnimationState","animClip","wrapMode","stopAction","speed","frameRate","frame","_cachedIndex","getCurrentIndex","wrappedIndex","frameInfoIndex","sprite-animation","SpriteAnimation","animations","_nameToState","_curAnimation","_spriteRenderer","_defaultSprite","_lastFrameIndex","_curIndex","_playStartFrame","_playAutomatically","getAnimState","newAnimState","init","initialized","nameToState","sprite_","state","defaultAnimation","curAnimation","lastFrameIndex","animState","frameCount","sample","enabled","lateUpdate","delta","step","newIndex"],"mappings":"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","file":"project.js","sourcesContent":["require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({\"AudioControl\":[function(require,module,exports){\nFire._RFpush('38f164e9c2b844baa46f0d4d7d7205dd');\n// script/Game/AudioControl.js\n\nvar AudioControl = {};\n\nAudioControl.play_finished = function () {\n    var Audio_finished = Fire.Entity.find('/Audio/done');\n    var audio = Audio_finished.getComponent(Fire.AudioSource);\n    audio.play();\n};\n\nAudioControl.play_bobo = function () {\n    var Audio_bobo = Fire.Entity.find('/Audio/bobo');\n    var audio = Audio_bobo.getComponent(Fire.AudioSource);\n    audio.play();\n};\n\nmodule.exports = AudioControl;\n\nFire._RFpop();\n},{}],\"Board\":[function(require,module,exports){\nFire._RFpush('fbbb16a7f4a84ff59ef689649c3168ec');\n// script/Game/Board.js\n\nvar Cell = require('Cell');\nvar Cube = require('Cube');\n\nvar Board = Fire.defineComponent(function () {\n    this._tempGrid = null;\n\n    this.delCubeRowList = [];\n    this.delCubeColList = [];\n});\n\nBoard.prop(\"_board\", [], Fire.HideInInspector);\n\nBoard.prop(\"grid\", null, Fire.ObjectType(Fire.Entity), Fire.HideInInspector);\n\nBoard.prop(\"count\", new Fire.Vec2(10, 10));\n\nBoard.prop(\"size\", new Fire.Vec2(30, 30));\n\nBoard.prop(\"spacing\", 2, Fire.Integer);\n\nBoard.prop(\"_createOrClean\", false, Fire.HideInInspector);\nBoard.getset(\"createOrClean\",\n    function () { return this._createOrClean; },\n    function (value) {\n        if (value != this._createOrClean) {\n            this._createOrClean = value;\n            if (this._createOrClean) {\n                this.create();\n            }\n            else {\n                this.clean();\n            }\n        }\n});\n\n//-- 创建棋盘格子\nBoard.prototype.create = function () {\n    this._board = [];\n\n    if (!this._tempGrid) {\n        this._tempGrid = Fire.Entity.find('/Prefabs/cube');\n    }\n    var widthX = (this.size.x + this.spacing);\n    var widthY = (this.size.y + this.spacing);\n    for (var x = 0, len = this.count.x; x < len; ++x) {\n        this._board[x] = [];\n        for (var y = 0, len = this.count.y; y < len; ++y) {\n            var entity = Fire.instantiate(this._tempGrid);\n            entity.parent = this.entity;\n            entity.name = x + \":\" + y;\n            //var startPosX = ((widthX * this.count.x) / 2) - (widthX / 2);\n            //var startPosY = ((widthY * this.count.y) / 2) - (widthY / 2);\n            entity.transform.position = new Fire.Vec2(x * widthX, y * widthY);\n            var renderer = entity.getComponent(Fire.SpriteRenderer);\n//             renderer.color = new Fire.Color(115 / 255, 115 / 255, 115 / 255, 1);\n            var cell = entity.addComponent(Cell);\n            cell.offset = new Fire.Vec2(x, y);\n            this._board[x][y] = cell;\n        }\n    }    \n    this._createOrClean = true;\n};\n\nBoard.prototype.onLoad = function () {\n    //-- 判断行是否可以消除\n    this.entity.on(\"putCube\", function (event) {\n        var cell = event.target.getComponent(Cell);\n        this.delline(cell);\n    }.bind(this));\n};\n\nBoard.prototype.delline = function (cell) {\n    var clearRow = true, clearCol = true;\n    var tempCell = null;\n    var x = 0, y = 0;\n    var tempDelCubeRowList = []\n    var tempDelCubeColList = []\n    for (x = cell.offset.x; x >= 0; --x) {\n        tempCell = this.getCell(x, cell.offset.y);\n        if (!tempCell.hasCube) {\n            clearRow = false;\n            break;\n        }\n        else {\n            tempDelCubeRowList.push(tempCell);\n        }\n    }\n    if (clearRow) {\n        for (x = cell.offset.x; x < this.count.x; ++x) {\n            tempCell = this.getCell(x, cell.offset.y);\n            if (!tempCell.hasCube) {\n                clearRow = false;\n                break;\n            }\n            else {\n                tempDelCubeRowList.push(tempCell);\n            }\n        }\n    }\n    for (y = cell.offset.y; y >= 0; --y) {\n        tempCell = this.getCell(cell.offset.x, y);\n        if (!tempCell.hasCube) {\n            clearCol = false;\n            break;\n        }\n        else {\n            tempDelCubeColList.push(tempCell);\n        }\n    }\n    if (clearCol) {\n        for (y = cell.offset.y; y < this.count.y; ++y) {\n            tempCell = this.getCell(cell.offset.x, y);\n            if (!tempCell.hasCube) {\n                clearCol = false;\n                break;\n            }\n            else {\n                tempDelCubeColList.push(tempCell);\n            }\n        }\n    }\n\n    if (clearRow) {\n        this.delCubeRowList.push(tempDelCubeRowList);\n    }\n    if (clearCol) {\n        this.delCubeColList.push(tempDelCubeColList);\n    }\n    \n};\n\n\n//-- 清空棋盘\nBoard.prototype.clean = function () {\n    var len = 0;\n    for (var x = 0, len = this.count.x; x < len; ++x) {\n        for (var y = 0, len = this.count.y; y < len; ++y) {\n            if(this._board[x][y]){\n            \tthis._board[x][y].entity.destroy();\n            \tif (!Fire.Engine.isPlaying) {\n            \t    Fire.FObject._deferredDestroy();\n            \t}\n            }\n        }\n    }\n    this._board = [];\n    this._createOrClean = false;\n};\n\n//--  通过X Y 获取Cell（X 0-9）(Y 0-9)\nBoard.prototype.getCell = function (x, y) {\n    if (x > -1 && x < 10 && y > -1 && y < 10) {\n        return this._board[x][y];\n    }\n    return null;\n};\n\n//-- 判断是否可以在格子上放置方块\nBoard.prototype.canPutCubeToCell = function (cubeGroup, center) {\n    for (var j = 0, len = cubeGroup._children.length; j < len; ++j) {\n        var cube = cubeGroup._children[j].getComponent(Cube);\n        var pos = cube.position;\n        var cell = this.getCell(center.x + pos.x, center.y + pos.y);\n        if (!cell || (cell.hasCube && !cell.readyClear)) {\n            return false;\n        }\n    }\n    return true;\n};\n\nmodule.exports = Board;\n\nFire._RFpop();\n},{\"Cell\":\"Cell\",\"Cube\":\"Cube\"}],\"Button\":[function(require,module,exports){\nFire._RFpush('cc304a3ca44e43488b9c400d9fab8945');\n// script/UI/Button.js\n\nvar Button = Fire.defineComponent(function () { \n\tthis._btnRender = null;\n});\n\nButton.prop('normal', null, Fire.ObjectType(Fire.Sprite));\n\nButton.prop('hover', null, Fire.ObjectType(Fire.Sprite));\n\nButton.prop('pressed', null, Fire.ObjectType(Fire.Sprite));\n\nButton.prop('disabled', null, Fire.ObjectType(Fire.Sprite));\n\nButton.prototype.onLoad = function () {\n\n    this._btnRender = this.entity.getComponent(Fire.SpriteRenderer);\n    \n    this._btnRender.sprite = this.normal;\n    \n    this.entity.on('mousedown', function () {\n        this._btnRender.sprite = this.pressed;\n    }.bind(this));\n\n    this.entity.on('mouseup', function () {\n        this._btnRender.sprite = this.normal;\n    }.bind(this));\n\n};\n\nFire._RFpop();\n},{}],\"Cell\":[function(require,module,exports){\nFire._RFpush('d2a358201e6d4a36b7fd92369c3dd36d');\n// script/Game/Cell.js\n\nvar Cell = Fire.defineComponent();\n\nCell.prop('offset', new Fire.Vec2(0, 0));\nCell.prop('hasCube', false);\nCell.prop('cube', null, Fire.HideInInspector);\nCell.prop('readyClear', false, Fire.HideInInspector);\n\nCell.prototype.clean = function() {\n    this.entity.destroy();\n};\n\nCell.prototype.putCube = function (cube) {\n    cube.entity.parent = this.entity;\n    cube.transform.position = new Fire.Vec2(0, 0);\n    this.hasCube = true;\n    this.cube = cube;\n    \n    //-- 绑定已经放置方块消息\n    this.entity.dispatchEvent(new Fire.Event(\"putCube\", true));\n    //-- 绑定Cube销毁消息\n    this.entity.on(\"curb clear\", function () {\n        this.hasCube = false;\n        this.readyClear = false;\n        this.cube = null;\n    }.bind(this));\n};\n\nmodule.exports = Cell;\n\nFire._RFpop();\n},{}],\"CubeGroup\":[function(require,module,exports){\nFire._RFpush('931bfcf8d031410f9e7daeca279cedae');\n// script/Game/CubeGroup.js\n\nvar CubeGroup = Fire.defineComponent(function () {\n    this.stopAnimation = true;\n});\n\nvar Cube = require('Cube');\n\nvar thisTransform = null;\n\nvar AudioControl = require('AudioControl');\n\nvar thisGroup = null;\n\nvar camera = null;\n\nCubeGroup.prop(\"_creatCubes\", false, Fire.HideInInspector);\n\nCubeGroup.prop('_creatThree', false, Fire.HideInInspector);\n\nCubeGroup.getset('CreatThree',\n\nfunction() {\n    return this._creatThree;\n},\nfunction(value) {\n    if (value != this._creatThree) {\n        this._creatThree = value;\n    }\n    if (value) {\n        this.create3(32);\n    }\n});\n\nCubeGroup.getset(\"CreatCubes\",\n\nfunction() {\n    return this._creatCubes;\n},\n\nfunction(value) {\n    if (value !== this._creatCubes) {\n        this._creatCubes = value;\n        if (value) {\n            var obj = this.createRandom(32);\n        } else {\n            this.clear();\n        }\n    }\n});\n\nvar Box_9 = [{\n    \"y\": 0,\n    \"x\": 0\n},\n{\n    \"y\": 0,\n    \"x\": -1\n},\n{\n    \"y\": 0,\n    \"x\": 1\n},\n{\n    \"y\": -1,\n    \"x\": 0\n},\n{\n    \"y\": -1,\n    \"x\": 1\n},\n{\n    \"y\": -1,\n    \"x\": -1\n},\n{\n    \"y\": 1,\n    \"x\": -1\n},\n{\n    \"y\": 1,\n    \"x\": 0\n},\n{\n    \"y\": 1,\n    \"x\": 1\n},\n]; // 田 *3\n\nvar Curved_3_0 = [{\n    \"y\": 1,\n    \"x\": 0\n},\n{\n    \"y\": 0,\n    \"x\": 0\n},\n{\n    \"y\": 0,\n    \"x\": 1\n},\n]; //L *3  0\nvar Curved_3_90 = [{\n    \"y\": 0,\n    \"x\": 0\n},\n{\n    \"y\": -1,\n    \"x\": 0\n},\n{\n    \"y\": 0,\n    \"x\": 1\n},\n]; //L *3 90\nvar Curved_3_180 = [{\n    \"y\": 0,\n    \"x\": 0\n},\n{\n    \"y\": 0,\n    \"x\": -1\n},\n{\n    \"y\": -1,\n    \"x\": 0\n},\n]; //L *3 180\nvar Curved_3_270 = [{\n    \"y\": 0,\n    \"x\": 0\n},\n{\n    \"y\": 0,\n    \"x\": -1\n},\n{\n    \"y\": 1,\n    \"x\": 0\n},\n]; //L *3 270\n\nvar Curved_5_0 = [{\n    \"y\": 0,\n    \"x\": 0\n},\n{\n    \"y\": 1,\n    \"x\": 0\n},\n{\n    \"y\": 2,\n    \"x\": 0\n},\n{\n    \"y\": 0,\n    \"x\": 1\n},\n{\n    \"y\": 0,\n    \"x\": 2\n},\n]; //L *5 0\nvar Curved_5_90 = [{\n    \"y\": 0,\n    \"x\": 0\n},\n{\n    \"y\": 0,\n    \"x\": 1\n},\n{\n    \"y\": 0,\n    \"x\": 2\n},\n{\n    \"y\": -1,\n    \"x\": 0\n},\n{\n    \"y\": -2,\n    \"x\": 0\n},\n]; //L *5 0 90\nvar Curved_5_180 = [{\n    \"y\": 0,\n    \"x\": 0\n},\n{\n    \"y\": 0,\n    \"x\": -1\n},\n{\n    \"y\": 0,\n    \"x\": -2\n},\n{\n    \"y\": -1,\n    \"x\": 0\n},\n{\n    \"y\": -2,\n    \"x\": 0\n},\n]; //L *5 0 180\nvar Curved_5_270 = [{\n    \"y\": 0,\n    \"x\": 0\n},\n{\n    \"y\": 0,\n    \"x\": -1\n},\n{\n    \"y\": 0,\n    \"x\": -2\n},\n{\n    \"y\": 2,\n    \"x\": 0\n},\n{\n    \"y\": 1,\n    \"x\": 0\n},\n]; //L *5 0 270\nvar Box_4 = [{\n    \"y\": 0,\n    \"x\": 0\n},\n{\n    \"y\": 0,\n    \"x\": 1\n},\n{\n    \"y\": 1,\n    \"x\": 0\n},\n{\n    \"y\": 1,\n    \"x\": 1\n},\n];\n\nvar Box_1 = [{\n    \"y\": 0,\n    \"x\": 0\n},\n];\n\nvar Line_2_0 = [{\n    \"y\": 0,\n    \"x\": 0\n},\n{\n    \"y\": 0,\n    \"x\": 1\n},\n]; // -- *2 0\nvar Line_2_90 = [{\n    \"y\": 0,\n    \"x\": 0\n},\n{\n    \"y\": 1,\n    \"x\": 0\n},\n]; // I *2 90\nvar Line_3_0 = [{\n    \"y\": 0,\n    \"x\": 0\n},\n{\n    \"y\": 0,\n    \"x\": -1\n},\n{\n    \"y\": 0,\n    \"x\": 1\n},\n]; // --- *3 0\nvar Line_3_90 = [{\n    \"y\": 0,\n    \"x\": 0\n},\n{\n    \"y\": 1,\n    \"x\": 0\n},\n{\n    \"y\": -1,\n    \"x\": 0\n},\n]; // --- *3 90\nvar Line_4_0 = [{\n    \"y\": 0,\n    \"x\": 0\n},\n{\n    \"y\": 0,\n    \"x\": -1\n},\n{\n    \"y\": 0,\n    \"x\": 1\n},\n{\n    \"y\": 0,\n    \"x\": 2\n},\n]; // ---- *4 0\nvar Line_4_90 = [{\n    \"y\": 0,\n    \"x\": 0\n},\n{\n    \"y\": -1,\n    \"x\": 0\n},\n{\n    \"y\": 1,\n    \"x\": 0\n},\n{\n    \"y\": 2,\n    \"x\": 0\n},\n]; //---- *4 90\nvar Line_5_0 = [{\n    \"y\": 0,\n    \"x\": 0\n},\n{\n    \"y\": 0,\n    \"x\": -1\n},\n{\n    \"y\": 0,\n    \"x\": 1\n},\n{\n    \"y\": 0,\n    \"x\": 2\n},\n{\n    \"y\": 0,\n    \"x\": -2\n},\n];\n\nvar Line_5_90 = [{\n    \"y\": 0,\n    \"x\": 0\n},\n{\n    \"y\": -1,\n    \"x\": 0\n},\n{\n    \"y\": -2,\n    \"x\": 0\n},\n{\n    \"y\": 1,\n    \"x\": 0\n},\n{\n    \"y\": 2,\n    \"x\": 0\n},\n];\n\nCubeGroup.prototype._gridType = [Box_9, Box_4, Box_1, Curved_3_0, Curved_3_90, Curved_3_180, Curved_3_270, Curved_5_0, Curved_5_90, Curved_5_180, Curved_5_270, Line_2_0, Line_2_90, Line_3_0, Line_3_90, Line_4_0, Line_4_90, Line_5_0, Line_5_90];\n\nvar GridType = (function(t) {\n    t[t.Box_9 = 0] = 'Box_9';\n    t[t.Box_4 = 1] = 'Box_4';\n    t[t.Box_1 = 2] = 'Box_1';\n    t[t.Curved_3_0 = 3] = 'Curved_3_0';\n    t[t.Curved_3_90 = 4] = 'Curved_3_90';\n    t[t.Curved_3_180 = 5] = 'Curved_3_180';\n    t[t.Curved_3_270 = 6] = 'Curved_3_270';\n    t[t.Curved_5_0 = 7] = 'Curved_5_0';\n    t[t.Curved_5_90 = 8] = 'Curved_5_90';\n    t[t.Curved_5_180 = 9] = 'Curved_5_180';\n    t[t.Curved_5_270 = 10] = 'Curved_5_270';\n    t[t.Line_2_0 = 11] = 'Line_2_0';\n    t[t.Line_2_90 = 12] = 'Line_2_90';\n    t[t.Line_3_0 = 13] = 'Line_3_0';\n    t[t.Line_3_90 = 14] = 'Line_3_90';\n    t[t.Line_4_0 = 15] = 'Line_4_0';\n    t[t.Line_4_90 = 16] = 'Line_4_90';\n    t[t.Line_5_0 = 17] = 'Line_5_0';\n    t[t.Line_5_90 = 18] = 'Line_5_90';\n    return t;\n})({});\n\nCubeGroup.prop(\"_select\", GridType.Box_9, Fire.Enum(GridType), Fire.HideInInspector);\n\nCubeGroup.getset('select',\nfunction() {\n    return this._select;\n},\nfunction(value) {\n    //if (thisGroup.isValid) {\n    //    this.clear();\n    //}\n    if (value != this._select) {\n        this._select = value;\n        //this.create(32, this._gridType[value]);\n    }\n},\nFire.Enum(GridType));\n\nCubeGroup.prototype.gridType = {\n    \"Box_9\": Box_9,\n    \"Box_4\": Box_4,\n    \"Box_1\": Box_1,\n    \"Curved_3_0\": Curved_3_0,\n    \"Curved_3_90\": Curved_3_90,\n    \"Curved_3_180\": Curved_3_180,\n    \"Curved_3_270\": Curved_3_270,\n    \"Curved_5_0\": Curved_5_0,\n    \"Curved_5_90\": Curved_5_90,\n    \"Curved_5_180\": Curved_5_180,\n    \"Curved_5_270\": Curved_5_270,\n    \"Line_2_0\": Line_2_0,\n    \"Line_2_90\": Line_2_90,\n    \"Line_3_0\": Line_3_0,\n    \"Line_3_90\": Line_3_90,\n    \"Line_4_0\": Line_4_0,\n    \"Line_4_90\": Line_4_90,\n    \"Line_5_0\": Line_5_0,\n    \"Line_5_90\": Line_5_90\n};\n\n///color\nvar blue = new Fire.Color(97 / 255, 190 / 255, 227 / 255, 1);\nvar yellow = new Fire.Color(253 / 255, 197 / 255, 76 / 255, 1);\nvar red = new Fire.Color(218 / 255, 192 / 255, 90 / 255, 1);\nvar lightblue = new Fire.Color(83 / 255, 211 / 255, 174 / 255, 1);\nvar pink = new Fire.Color(229 / 255, 107 / 255, 129 / 255, 1);\nvar orange = new Fire.Color(243/255,80/255,12/255,1);\nvar green = new Fire.Color(85/255,192/255,67/255,1);\n\nCubeGroup.prototype._Colors = [blue, yellow, red, lightblue, pink,orange,green];\n\nCubeGroup.prototype.Colors = {\n    \"blue\": blue,\n    \"yellow\": yellow,\n    \"red\": red,\n    \"lightblue\": lightblue,\n    \"pink\": pink,\n    \"orange\": orange,\n    \"green\": green,\n};\n\n\nvar startX = 0;\nvar startY = 0;\nvar isMouseUp = true;\n\n\nvar moveGrid = null;\n\n/// ***********************\n/// * size: 单个cube大小\n/// * gridType: 指定的cubeGroup\n/// * callback:\n/// * _color: [可选] 设置指定color. 如果不设置，则随机\n/// ***********************\nCubeGroup.prototype.create = function(size, gridType, _color) {\n    var color = this._Colors[Math.floor(Math.random() * 7)];\n    if ( !! _color) {\n        color = _color;\n    }\n\n    var grid = this.entity.find('../Prefabs/cube');\n    var gridGroup = new Fire.Entity('group');\n    gridGroup.parent = this.entity;\n\n    for (var i = 0; i < gridType.length; i++) {\n        var obj = Fire.instantiate(grid);\n        obj.parent = gridGroup;\n        obj.name = 'child_' + i;\n        var cube = obj.addComponent(Cube);\n\n        cube.position = new Fire.Vec2(gridType[i].x, gridType[i].y);\n        obj.getComponent(Fire.SpriteRenderer).color = color;\n        obj.transform.position = new Vec2(gridType[i].x * size, gridType[i].y * size);\n    }\n\n    gridGroup.transform.scale = new Fire.Vec2(0.8,0.8);\n\n    gridGroup.on('mousedown',\n        function(event) {\n        \tisMouseUp = false;\n            moveGrid = gridGroup;\n        \tmoveGrid.transform.scale = new Fire.Vec2(0.9,0.9);\n        }.bind(this)\n\t);\n\n    gridGroup.on('mouseup',\n       function (event) {\n           moveGrid = null;\n       }.bind(this)\n   );\n\n    thisGroup = gridGroup;\n    return gridGroup;\n};\n\nCubeGroup.prototype.createRandom = function(size) {\n    var ran = 0;\n    ran = Math.floor(Math.random() * 19);\n    var ranGrid = this._gridType[ran];\n    return this.create(size, ranGrid);\n};\n\nCubeGroup.prototype.move = function (moveX,moveY,grid) {\n    var CubeGroupPosition = thisTransform;\n    var screenPosition = new Fire.Vec2(moveX,moveY);\n    var wordPostion = camera.screenToWorld(screenPosition);\n    grid.transform.position = new Fire.Vec2(wordPostion.x + CubeGroupPosition.x,wordPostion.y - CubeGroupPosition.y);\n};\n\nvar groupBorad = [];\nvar groupBoradPositions = [];\n\n\nCubeGroup.prototype.create3 = function(size) {\n    groupBoradPositions = [];\n\n    groupBorad = [];\n    for (var i = 0; i < 3; i++) {\n        var group = this.createRandom(size);\n        group.transform.position = new Fire.Vec2((( - 5 * size) + (5 * size) * i), group.transform.position.y);\n        var xy = {\"id\":group.id,'position':group.transform.position};\n        groupBoradPositions.push(xy);\n        groupBorad.push(group);\n    }\n    this.entity.transform.scale = new Fire.Vec2(0.0,0.0);\n    this.play();\n\n    return groupBorad;\n};\n\nCubeGroup.prototype.clear = function() {\n    try {\n        thisGroup.destroy();\n    } catch(e) {\n\n\t}\n};\n\nCubeGroup.prototype.resetPosition = function(group) {\n    var undoPosition = group.transform.position;\n\tfor(var i =0; i < groupBorad.length; i++ ) {\n\t\tif (groupBorad[i].id === group.id) {\n            for (var j = 0; j < groupBoradPositions.length; j++) {\n                if (groupBoradPositions[j].id === group.id) {\n                    group.transform.position = groupBoradPositions[j].position;\n                    group.transform.scale = new Fire.Vec2(0.8,0.8);\n                }\n            }\n        }\n    }\n};\n\nCubeGroup.prototype.onLoad = function() {\n\n    if (Fire.Engine.isPlaying) {\n\n        var Game = require('Game');\n\n        Fire.Input.on('mousedown', function (event) {\n            startX = event.screenX;\n            startY = event.screenY;\n        }.bind(this));\n\n        Fire.Input.on('mousemove', function (event) {\n            if (!isMouseUp) {\n                this.move(event.screenX, event.screenY, moveGrid);\n            }\n        }.bind(this));\n\n        Fire.Input.on('mouseup', function (event) {\n            isMouseUp = true;\n            if (moveGrid) {\n                var canPut = Game.instance.putBoard(moveGrid);\n                if (!canPut) {\n                    this.resetPosition(moveGrid);\n                }\n                AudioControl.play_bobo();\n                moveGrid = null;\n            }\n        }.bind(this));\n\n        camera = Fire.Entity.find(\"/Main Camera\").getComponent(Fire.Camera);\n        thisTransform = Fire.Entity.find(\"/CubeGroup\").transform.position;\n    }\n};\n\n\nCubeGroup.prototype.play = function () {\n  \t  this.stopAnimation = false;\n};\n\nCubeGroup.prototype.animation = function () {\n  this.entity.transform.scale = new Fire.Vec2(this.entity.transform.scale.x + Fire.Time.deltaTime * 5, this.entity.transform.scale.x + Fire.Time.deltaTime * 5);\n    if (this.entity.transform.scale.x + Fire.Time.deltaTime >= 1) {\n        this.entity.transform.scale = new Fire.Vec2(1,1);\n        this.stopAnimation = true;\n    }\n};\n\nCubeGroup.prototype.update = function() {\n\tif (!this.stopAnimation) {\n        this.animation();\n    }\n};\n\nmodule.exports = CubeGroup;\n\nFire._RFpop();\n},{\"AudioControl\":\"AudioControl\",\"Cube\":\"Cube\",\"Game\":\"Game\"}],\"Cube\":[function(require,module,exports){\nFire._RFpush('1b94adf1d4114c4480e3a5fe8e59c19b');\n// script/Game/Cube.js\n\nvar cube = Fire.defineComponent(function() {\n    this.stopAnimation = true;\n});\n\ncube.prop('_position', new Fire.Vec2(0, 0), Fire.HideInInspector);\ncube.prop('_play', false, Fire.HideInInspector);\n\ncube.getset('play',\nfunction() {\n    return this._play;\n},\nfunction(value) {\n    if (value !== this._play) {\n        this._play = value;\n    }\n    if (value) {\n        this.playAnimation();\n    }\n});\n\ncube.getset('position',\nfunction() {\n    return this._position;\n},\nfunction(value) {\n    if (value != this._position) {\n        this._position = value;\n    }\n});\n\ncube.prototype.clear = function() {\n    this.entity.dispatchEvent(new Fire.Event(\"curb clear\", true));\n    this.entity.destroy();\n};\n\ncube.prototype.playAnimation = function() {\n    this.stopAnimation = false;\n};\n\ncube.prototype.animation = function() {\n    this.entity.transform.scale = new Fire.Vec2(this.entity.transform.scale.x - Fire.Time.deltaTime * 5, this.entity.transform.scale.x - Fire.Time.deltaTime * 5);\n    if (this.entity.transform.scale.x - Fire.Time.deltaTime <= 0) {\n        this.stopAnimation = true;\n        this.clear();\n    }\n};\n\ncube.prototype.update = function() {\n    if (!this.stopAnimation) {\n        this.animation();\n    }\n};\n\nmodule.exports = cube;\n\nFire._RFpop();\n},{}],\"GameMenu\":[function(require,module,exports){\nFire._RFpush('6634f146f45a4791a3ab864e29497a89');\n// script/Game/GameMenu.js\n\nvar GameMenu = Fire.defineComponent(function() {\n});\n\nGameMenu.prototype.onLoad = function () {\n\n    this.homeUUID = \"e41bbde0-cee8-475f-b96c-169db4f6d69d\";\n    this.gameUUID = \"e958312b-03e3-4a03-a2fe-6e7f40f634d6\";\n    this.menu = Fire.Entity.find('/Menu');\n\n    var btn_Menu = Fire.Entity.find(\"/Button/btn_Menu\");\n    btn_Menu.on(\"mouseup\", function () {\n        this.menu.active = true;\n    }.bind(this));\n\n    var btn_Continue = Fire.Entity.find('/Menu/btn_Continue');\n    btn_Continue.on(\"mouseup\", function () {\n        this.menu.active = false\n    }.bind(this));\n\n    var btn_Restart = Fire.Entity.find('/Menu/btn_Restart');\n    btn_Restart.on(\"mouseup\", function () {\n        Fire.Engine.loadScene(this.gameUUID);\n    }.bind(this));\n\n    var btn_Home = Fire.Entity.find('/Menu/btn_Home');\n    btn_Home.on(\"mouseup\", function () {\n        Fire.Engine.loadScene(this.homeUUID);\n    }.bind(this));\n\n    var gameOverRestart = Fire.Entity.find(\"/GameOver/btn_Restart\");\n    gameOverRestart.on('mouseup',function () {\n       Fire.Engine.loadScene(this.gameUUID);\n    }.bind(this));\n    \n    var gameOverHome = Fire.Entity.find(\"/GameOver/btn_Home\");\n    gameOverHome.on('mouseup',function () {\n       Fire.Engine.loadScene(this.homeUUID);\n    }.bind(this));\n};\n\nFire._RFpop();\n},{}],\"Game\":[function(require,module,exports){\nFire._RFpush('ff42982fad42403380ce38c75cf236f8');\n// script/Game/Game.js\n\nvar Board = require('Board');\nvar Cell = require('Cell');\nvar Cube = require('Cube');\nvar CubeGroup = require('CubeGroup');\nvar AudioControl = require('AudioControl');\n\nvar Game = Fire.defineComponent(function() {\n    this.board = null;\n    this.cubeGroup = null;\n    this.cubeGroupList = [];\n    this.fraction = 0;//--当前分数\n\t\n    this.idleCellList = [];//-- 场上空闲的格�\n\t\n    this.scoreText = null;\n    this._scoreValue = null;\n    \n    // 分数上涨动画\n    this.isJump = false;\n    this.jumpFirst = true;\n    \n    Game.instance = this;\n});\n\nGame.instance = null;\n\nGame.prototype.onLoad = function () {\n\n    //-- 创建格子到棋盘上\n    if (!this.tempCube) {\n        this.tempCube = Fire.Entity.find('/Prefabs/cube');\n    }\n\t    \n    this.scoreText = Fire.Entity.find('/GameOver/score');\n    var boardObj = Fire.Entity.find('/Board');\n    this.board = boardObj.getComponent(Board);\n    this.board.create();\n    \n    var cubeGroupObj = Fire.Entity.find('/CubeGroup');\n    this.cubeGroup = cubeGroupObj.getComponent(CubeGroup);\n    if (this.cubeGroupList.length === 0) {\n        this.cubeGroupList = this.cubeGroup.create3(32);\n    }\n\n    var soceObj = Fire.Entity.find(\"/Score/value\");\n    this._scoreValue = soceObj.getComponent(Fire.BitmapText);\n\n};\n\nGame.prototype.update = function() {\n\tif (this.isJump) {\n        this.jumpAnimation();\n    }\n};\n\n//-- �方块组放到棋盘�\nGame.prototype.putBoard = function(cubeGroup) {\n    if (!cubeGroup && !cubeGroup._children) {\n        return;\n    }\n    var w2l = this.board.transform.getWorldToLocalMatrix();\n    var pos = w2l.transformPoint(cubeGroup.transform.worldPosition);\n\n    var x = Math.round(pos.x / (this.board.size.x + this.board.spacing / 2));\n    var y = Math.round(pos.y / (this.board.size.y + this.board.spacing / 2));\n    var center = new Vec2(x, y);\n    var hasPutCube = this.board.canPutCubeToCell(cubeGroup, center);\n\n    var curbCount = cubeGroup._children.length;\n    if (hasPutCube) {\n        var i = 0,\n        len = 0,\n        child = [];\n        for (i = 0, len = cubeGroup._children.length; i < len; ++i) {\n            child.push(cubeGroup._children[i]);\n        }\n        for (i = 0, len = child.length; i < len; ++i) {\n            var cube = child[i].getComponent(Cube);\n            var pos = cube.position;\n            var cell = this.board.getCell(center.x + pos.x, center.y + pos.y);\n            cell.putCube(cube);\n        }\n\n        for (i = 0, len = this.cubeGroupList.length; i < len; ++i) {\n            var group = this.cubeGroupList[i];\n            if (group.id === cubeGroup.id) {\n                this.cubeGroupList.splice(i, 1);\n                break;\n            }\n        }\n\n        //-- 添加分数\n        this.addFraction(curbCount);\n        cubeGroup.destroy();\n\n        //-- 清除满格\n        this.removeLine();\n\n        //-- 更新棋盘上的空格\n        this.updateIdleCellList();\n\n        //-- 创建新的Cube Group\n        if (this.cubeGroupList.length === 0) {\n            this.cubeGroupList = this.cubeGroup.create3(32);\n        }\n        //-- 判断pass或者失败\n        var pass = this.pass();\n        if (!pass) {\n            this.gameOver();\n        }\n    }\n    return hasPutCube;\n};\n\nGame.prototype.removeLine = function() {\n    if (this.board.delCubeRowList.length > 0 || this.board.delCubeColList.length > 0) {\n        AudioControl.play_finished();\n    }\n    \n    var i = 0,\n    j = 0,\n    delCubeList = null;\n    for (i = 0; i < this.board.delCubeRowList.length; i++) {\n        delCubeList = this.board.delCubeRowList[i];\n        for (j = 0; j < delCubeList.length; j++) {\n            delCubeList[j].readyClear = true;\n            delCubeList[j].cube.playAnimation();\n        }\n    }\n    for (i = 0; i < this.board.delCubeColList.length; i++) {\n        delCubeList = this.board.delCubeColList[i];\n        for (j = 0; j < delCubeList.length; j++) {\n            delCubeList[j].readyClear = true;\n            delCubeList[j].cube.playAnimation();\n        }\n    }\n\n    this.board.delCubeRowList = [];\n    this.board.delCubeColList = [];\n    this._scoreValue.transform.scale = new Fire.Vec2(0.5,0.5);\n    this.isJump = true;\n};\n\n//-- 添加分数\nGame.prototype.addFraction = function (curbCount) {\n    var curFraction = this.fraction;\n    \n    var lineNum = this.board.delCubeRowList.length;\n    var rowNum = lineNum * this.board.count.x;\n    if (lineNum > 1) {\n        rowNum = (1 + (lineNum - 1) * 0.5) * (this.board.count.x * lineNum);\n    }\n    \n    lineNum =  this.board.delCubeColList.length;\n    var colNum = lineNum * this.board.count.x;\n    if (lineNum > 1) {\n        colNum = (1 + (lineNum - 1) * 0.5) * (this.board.count.y * lineNum);\n    }\n    \n    this.fraction = (curFraction + curbCount) + rowNum + colNum;\n\n    this._scoreValue.text = this.fraction;\n};\n\nGame.prototype.updateIdleCellList = function () {\n    this.idleCellList = [];\n    for (var x = 0; x < this.board.count.x; ++x) {\n        for (var y = 0; y < this.board.count.x; ++y) {\n            var cell = this.board.getCell(x, y);\n            if (!cell.hasCube || (cell.cube && cell.readyClear)) {\n                this.idleCellList.push(cell);\n            }\n        }\n    }\n};\n\nGame.prototype.jumpAnimation = function () {\n    if (this.jumpFirst) {\n        this._scoreValue.transform.scaleX += Fire.Time.deltaTime * 10;\n        this._scoreValue.transform.scaleY += Fire.Time.deltaTime * 10;\n        if (this._scoreValue.transform.scaleX >= 1.5) {\n            this.jumpFirst = false;\n        }\n    }else {\n        this._scoreValue.transform.scaleX -= Fire.Time.deltaTime * 10;\n        this._scoreValue.transform.scaleY -= Fire.Time.deltaTime * 10;\n        if (this._scoreValue.transform.scaleX <= 1) {\n            this._scoreValue.transform.scale = new Fire.Vec2(1,1);\n            this.isJump = false;\n            this.jumpFirst = true;\n        }\n    }\n}\n\nGame.prototype.pass = function () {\n    var groupList = this.cubeGroupList;\n    var idleCellList = this.idleCellList;\n    var grouplen = groupList.length;\n    var celllen = idleCellList.length;\n    var canPut = false;\n    for (var i = 0; i < grouplen; i++) {\n        for (var j = 0; j < celllen; j++) {\n            var center = new Fire.Vec2(idleCellList[j].offset.x, idleCellList[j].offset.y);\n            var canPut = this.board.canPutCubeToCell(groupList[i], center);\n            if (canPut) {\n                break\n            }\n        }\n        if (canPut) {\n            break\n        }\n    }\n    return canPut;\n};\n\nGame.prototype.gameOver = function () {\n    var scoreBitmapText = this.scoreText.getComponent(Fire.BitmapText)\n    scoreBitmapText.text = this.fraction;\n    var gameOverBoard = Fire.Entity.find('/GameOver');\n    gameOverBoard.transform.scale = new Fire.Vec2(1,1);\n    this.isScore = true;\n};\n\nmodule.exports = Game;\n\n\nFire._RFpop();\n},{\"AudioControl\":\"AudioControl\",\"Board\":\"Board\",\"Cell\":\"Cell\",\"Cube\":\"Cube\",\"CubeGroup\":\"CubeGroup\"}],\"MainMenu\":[function(require,module,exports){\nFire._RFpush('49613786df3344ea98ede46a5af69786');\n// script/Menu/MainMenu.js\n\nvar MainMenu = Fire.defineComponent(function(){\n    \n});\n\n//MainMenu.prop('')\n\nMainMenu.prototype.onLoad = function(){\n\n    this.gameUUID = \"e958312b-03e3-4a03-a2fe-6e7f40f634d6\";\n    \n\tvar btnPlay = Fire.Entity.find(\"/btn_play\");\n\tbtnPlay.on(\"mouseup\", function () {\n\t    Fire.Engine.loadScene(this.gameUUID);\n\t}.bind(this));\n    \n};\n\nFire._RFpop();\n},{}],\"Toggle\":[function(require,module,exports){\nFire._RFpush('e0ac2b810a73466d9f305d401ca23234');\n// script/UI/Toggle.js\n\nvar Toggle = Fire.defineComponent(function () { \n\tthis._btnRender = null;\n    this._tiggle = false;\n});\n\nToggle.prop('normal', null, Fire.ObjectType(Fire.Sprite));\n\nToggle.prop('pressed', null, Fire.ObjectType(Fire.Sprite));\n\nToggle.prototype.onLoad = function () {\n\n    this._btnRender = this.entity.getComponent(Fire.SpriteRenderer);\n    \n    this._btnRender.sprite = this.normal;\n    \n    this.entity.on('mousedown', function () {\n        this._tiggle = !this._tiggle;\n        if(this._tiggle) {\n\t        this._btnRender.sprite = this.pressed;\n        }\n        else{\n\t        this._btnRender.sprite = this.normal;\n        }\n    }.bind(this));\n};\n\nFire._RFpop();\n},{}],\"audio-clip\":[function(require,module,exports){\nFire._RFpush();\n// src/audio-clip.js\n\nFire.AudioClip = (function () {\n    var AudioClip = Fire.extend(\"Fire.AudioClip\", Fire.Asset);\n\n    AudioClip.prop('rawData', null, Fire.RawType('audio'));\n\n    AudioClip.get('buffer', function () {\n        return Fire.AudioContext.getClipBuffer(this);\n    });\n\n    AudioClip.get(\"length\", function () {\n        return Fire.AudioContext.getClipLength(this);\n    });\n\n    AudioClip.get(\"samples\", function () {\n        return Fire.AudioContext.getClipSamples(this);\n    });\n\n    AudioClip.get(\"channels\", function () {\n        return Fire.AudioContext.getClipChannels(this);\n    });\n\n    AudioClip.get(\"frequency\", function () {\n        return Fire.AudioContext.getClipFrequency(this);\n    });\n\n    return AudioClip;\n})();\n\n// create entity action\n// @if EDITOR\nFire.AudioClip.prototype.createEntity = function ( cb ) {\n    var ent = new Fire.Entity(this.name);\n\n    var audioSource = ent.addComponent(Fire.AudioSource);\n\n    audioSource.clip = this;\n\n    if ( cb )\n        cb (ent);\n};\n// @endif\n\nmodule.exports = Fire.AudioClip;\n\nFire._RFpop();\n},{}],\"audio-legacy\":[function(require,module,exports){\nFire._RFpush();\n// src/audio-legacy.js\n\n(function(){\n    var UseWebAudio = (window.AudioContext || window.webkitAudioContext || window.mozAudioContext);\n    if (UseWebAudio) {\n        return;\n    }\n    var AudioContext = {};\n\n    function loader (url, callback, onProgress) {\n        var audio = document.createElement(\"audio\");\n        audio.addEventListener(\"canplaythrough\", function () {\n            callback(null, audio);\n        }, false);\n        audio.addEventListener('error', function (e) {\n            callback('LoadAudioClip: \"' + url +\n                    '\" seems to be unreachable or the file is empty. InnerMessage: ' + e, null);\n        }, false);\n\n        audio.src = url;\n        audio.load();\n    }\n\n    Fire.LoadManager.registerRawTypes('audio', loader);\n\n    AudioContext.initSource = function (target) {\n        target._audio = null;\n    };\n\n    AudioContext.getCurrentTime = function (target) {\n        if (target && target._audio && target._playing) {\n            return target._audio.currentTime;\n        }\n        else {\n            return 0;\n        }\n    };\n\n    AudioContext.updateTime = function (target, value) {\n        if (target && target._audio) {\n            var duration = target._audio.duration;\n            target._audio.currentTime = value;\n        }\n    };\n\n    // 靜音\n    AudioContext.updateMute = function (target) {\n        if (!target || !target._audio) { return; }\n        target._audio.muted = target.mute;\n    };\n\n    // 设置音量，音量范围是[0, 1]\n    AudioContext.updateVolume = function (target) {\n        if (!target || !target._audio) { return; }\n        target._audio.volume = target.volume;\n    };\n\n    // 设置循环\n    AudioContext.updateLoop = function (target) {\n        if (!target || !target._audio) { return; }\n        target._audio.loop = target.loop;\n    };\n\n    // 将音乐源节点绑定具体的音频buffer\n    AudioContext.updateAudioClip = function (target) {\n        if (!target || !target.clip) { return; }\n        target._audio = target.clip.rawData;\n    };\n\n    // 暫停\n    AudioContext.pause = function (target) {\n        if (!target._audio) { return; }\n        target._audio.pause();\n    };\n\n    // 停止\n    AudioContext.stop = function (target) {\n        if (!target._audio) { return; }\n        target._audio.pause();\n        target._audio.currentTime = 0;\n    };\n\n    // 播放\n    AudioContext.play = function (target) {\n        if (!target || !target.clip || !target.clip.rawData) { return; }\n        if (target._playing && !target._paused) { return; }\n        this.updateAudioClip(target);\n        this.updateVolume(target);\n        this.updateLoop(target);\n        this.updateMute(target);\n        target._audio.play();\n\n        // 播放结束后的回调\n        target._audio.addEventListener('ended', function () {\n            target.onPlayEnd.bind(target);\n        }, false);\n    };\n\n    // 获得音频剪辑的 buffer\n    AudioContext.getClipBuffer = function (clip) {\n        Fire.error(\"Audio does not contain the attribute!\");\n        return null;\n    };\n\n    // 以秒为单位 获取音频剪辑的 长度\n    AudioContext.getClipLength = function (clip) {\n        return target.clip.rawData.duration;\n    };\n\n    // 音频剪辑的长度\n    AudioContext.getClipSamples = function (target) {\n        Fire.error(\"Audio does not contain the attribute!\");\n        return null;\n    };\n\n    // 音频剪辑的声道数\n    AudioContext.getClipChannels = function (target) {\n        Fire.error(\"Audio does not contain the attribute!\");\n        return null;\n    };\n\n    // 音频剪辑的采样频率\n    AudioContext.getClipFrequency = function (target) {\n        Fire.error(\"Audio does not contain the attribute!\");\n        return null;\n    };\n\n\n    Fire.AudioContext = AudioContext;\n})();\n\nFire._RFpop();\n},{}],\"audio-source\":[function(require,module,exports){\nFire._RFpush();\n// src/audio-source.js\n\nvar AudioSource = (function () {\n    var AudioSource = Fire.extend(\"Fire.AudioSource\", Fire.Component, function () {\n        this._playing = false; //-- 声源暂停或者停止时候为false\n        this._paused = false;//-- 来区分声源是暂停还是停止\n\n        this._startTime = 0;\n        this._lastPlay = 0;\n\n        this._buffSource = null;\n        this._volumeGain = null;\n\n        this.onEnd = null;\n    });\n\n    //\n    Fire.addComponentMenu(AudioSource, 'AudioSource');\n\n    //\n    Object.defineProperty(AudioSource.prototype, \"isPlaying\", {\n        get: function () {\n            return this._playing && !this._paused;\n        }\n    });\n\n    Object.defineProperty(AudioSource.prototype, \"isPaused\", {\n        get: function () {\n            return this._paused;\n        }\n    });\n\n    //\n    Object.defineProperty(AudioSource.prototype, 'time', {\n        get: function () {\n            return Fire.AudioContext.getCurrentTime(this);\n        },\n        set: function (value) {\n            Fire.AudioContext.updateTime(this, value);\n        }\n    });\n\n    //\n    AudioSource.prop('_playbackRate', 1.0, Fire.HideInInspector);\n    AudioSource.getset('playbackRate',\n        function () {\n            return this._playbackRate;\n        },\n        function (value) {\n            if (this._playbackRate !== value) {\n                this._playbackRate = value;\n                Fire.AudioContext.updatePlaybackRate(this);\n            }\n        }\n    );\n\n    //\n    AudioSource.prop('_clip', null, Fire.HideInInspector);\n    AudioSource.getset('clip',\n        function () {\n            return this._clip;\n        },\n        function (value) {\n            if (this._clip !== value) {\n                this._clip = value;\n                Fire.AudioContext.updateAudioClip(this);\n            }\n        },\n        Fire.ObjectType(Fire.AudioClip)\n    );\n\n    //\n    AudioSource.prop('_loop', false, Fire.HideInInspector);\n    AudioSource.getset('loop',\n       function () {\n           return this._loop;\n       },\n       function (value) {\n           if (this._loop !== value) {\n               this._loop = value;\n               Fire.AudioContext.updateLoop(this);\n           }\n       }\n    );\n\n    //\n    AudioSource.prop('_mute', false, Fire.HideInInspector);\n    AudioSource.getset('mute',\n       function () {\n           return this._mute;\n       },\n       function (value) {\n           if (this._mute !== value) {\n               this._mute = value;\n               Fire.AudioContext.updateMute(this);\n           }\n       }\n    );\n\n    //\n    AudioSource.prop('_volume', 1, Fire.HideInInspector);\n    AudioSource.getset('volume',\n       function () {\n           return this._volume;\n       },\n       function (value) {\n           if (this._volume !== value) {\n               this._volume = Math.clamp(value);\n               Fire.AudioContext.updateVolume(this);\n           }\n       },\n       Fire.Range(0,1)\n    );\n\n    AudioSource.prop('playOnAwake', true);\n\n    AudioSource.prototype.onPlayEnd = function () {\n        if ( this.onEnd ) {\n            this.onEnd();\n        }\n\n        this._playing = false;\n        this._paused = false;\n    };\n\n    AudioSource.prototype.pause = function () {\n        if ( this._paused )\n            return;\n\n        Fire.AudioContext.pause(this);\n        this._paused = true;\n    };\n\n    AudioSource.prototype.play = function () {\n        if ( this._playing && !this._paused )\n            return;\n\n        if ( this._paused )\n            Fire.AudioContext.play(this, this._startTime);\n        else\n            Fire.AudioContext.play(this, 0);\n\n        this._playing = true;\n        this._paused = false;\n    };\n\n    AudioSource.prototype.stop = function () {\n        if ( !this._playing ) {\n            return;\n        }\n\n        Fire.AudioContext.stop(this);\n        this._playing = false;\n        this._paused = false;\n    };\n\n    AudioSource.prototype.onLoad = function () {\n        if (this._playing ) {\n            this.stop();\n        }\n    };\n\n    AudioSource.prototype.onStart = function () {\n        //if (this.playOnAwake) {\n        //    console.log(\"onStart\");\n        //    this.play();\n        //}\n    };\n\n    AudioSource.prototype.onEnable = function () {\n        if (this.playOnAwake) {\n            this.play();\n        }\n    };\n\n    AudioSource.prototype.onDisable = function () {\n        this.stop();\n    };\n\n    return AudioSource;\n})();\n\nFire.AudioSource = AudioSource;\n\nFire._RFpop();\n},{}],\"audio-web-audio\":[function(require,module,exports){\nFire._RFpush();\n// src/audio-web-audio.js\n\n(function () {\n    var NativeAudioContext = (window.AudioContext || window.webkitAudioContext || window.mozAudioContext);\n    if ( !NativeAudioContext ) {\n        return;\n    }\n\n    // fix fireball-x/dev#365\n    if (!Fire.nativeAC) {\n        Fire.nativeAC = new NativeAudioContext();\n    }\n\n    // 添加safeDecodeAudioData的原因：https://github.com/fireball-x/dev/issues/318\n    function safeDecodeAudioData(context, buffer, url, callback) {\n        var timeout = false;\n        var timerId = setTimeout(function () {\n            callback('The operation of decoding audio data already timeout! Audio url: \"' + url +\n                     '\". Set Fire.AudioContext.MaxDecodeTime to a larger value if this error often occur. ' +\n                     'See fireball-x/dev#318 for details.', null);\n        }, AudioContext.MaxDecodeTime);\n\n        context.decodeAudioData(buffer,\n            function (decodedData) {\n                if (!timeout) {\n                    callback(null, decodedData);\n                    clearTimeout(timerId);\n                }\n            },\n            function (e) {\n                if (!timeout) {\n                    callback(null, 'LoadAudioClip: \"' + url +\n                        '\" seems to be unreachable or the file is empty. InnerMessage: ' + e);\n                    clearTimeout(timerId);\n                }\n            }\n        );\n    }\n\n    function loader(url, callback, onProgress) {\n        var cb = callback && function (error, xhr) {\n            if (xhr) {\n                safeDecodeAudioData(Fire.nativeAC, xhr.response, url, callback);\n            }\n            else {\n                callback('LoadAudioClip: \"' + url +\n               '\" seems to be unreachable or the file is empty. InnerMessage: ' + error, null);\n            }\n        };\n        Fire.LoadManager._loadFromXHR(url, cb, onProgress, 'arraybuffer');\n    }\n\n    Fire.LoadManager.registerRawTypes('audio', loader);\n\n    var AudioContext = {};\n\n    AudioContext.MaxDecodeTime = 3000;\n\n    AudioContext.getCurrentTime = function (target) {\n        if ( target._paused ) {\n            return target._startTime;\n        }\n\n        if ( target._playing ) {\n            return target._startTime + this.getPlayedTime(target);\n        }\n\n        return 0;\n    };\n\n    AudioContext.getPlayedTime = function (target) {\n        return (Fire.nativeAC.currentTime - target._lastPlay) * target._playbackRate;\n    };\n\n    //\n    AudioContext.updateTime = function (target, time) {\n        target._lastPlay = Fire.nativeAC.currentTime;\n        target._startTime = time;\n\n        if ( target.isPlaying ) {\n            this.pause(target);\n            this.play(target);\n        }\n    };\n\n    //\n    AudioContext.updateMute = function (target) {\n        if (!target._volumeGain) { return; }\n        target._volumeGain.gain.value = target.mute ? -1 : (target.volume - 1);\n    };\n\n    // range [0,1]\n    AudioContext.updateVolume = function (target) {\n        if (!target._volumeGain) { return; }\n        target._volumeGain.gain.value = target.volume - 1;\n    };\n\n    //\n    AudioContext.updateLoop = function (target) {\n        if (!target._buffSource) { return; }\n        target._buffSource.loop = target.loop;\n    };\n\n    // bind buffer source\n    AudioContext.updateAudioClip = function (target) {\n        if ( target.isPlaying ) {\n            this.stop(target,false);\n            this.play(target);\n        }\n    };\n\n    //\n    AudioContext.updatePlaybackRate = function (target) {\n        if ( !this.isPaused ) {\n            this.pause(target);\n            this.play(target);\n        }\n    };\n\n    //\n    AudioContext.pause = function (target) {\n        if (!target._buffSource) { return; }\n\n        target._startTime += this.getPlayedTime(target);\n        target._buffSource.onended = null;\n        target._buffSource.stop();\n    };\n\n    //\n    AudioContext.stop = function ( target, ended ) {\n        if (!target._buffSource) { return; }\n\n        if ( !ended ) {\n            target._buffSource.onended = null;\n        }\n        target._buffSource.stop();\n    };\n\n    //\n    AudioContext.play = function ( target, at ) {\n        if (!target.clip || !target.clip.rawData) { return; }\n\n        // create buffer source\n        var bufferSource = Fire.nativeAC.createBufferSource();\n\n        // create volume control\n        var gain = Fire.nativeAC.createGain();\n\n        // connect\n        bufferSource.connect(gain);\n        gain.connect(Fire.nativeAC.destination);\n        bufferSource.connect(Fire.nativeAC.destination);\n\n        // init parameters\n        bufferSource.buffer = target.clip.rawData;\n        bufferSource.loop = target.loop;\n        bufferSource.playbackRate.value = target.playbackRate;\n        bufferSource.onended = target.onPlayEnd.bind(target);\n        gain.gain.value = target.mute ? -1 : (target.volume - 1);\n\n        //\n        target._buffSource = bufferSource;\n        target._volumeGain = gain;\n        target._startTime = at || 0;\n        target._lastPlay = Fire.nativeAC.currentTime;\n\n        // play\n        bufferSource.start( 0, this.getCurrentTime(target) );\n    };\n\n    // ===================\n\n    //\n    AudioContext.getClipBuffer = function (clip) {\n        return clip.rawData;\n    };\n\n    //\n    AudioContext.getClipLength = function (clip) {\n        if (clip.rawData) {\n            return clip.rawData.duration;\n        }\n        return -1;\n    };\n\n    //\n    AudioContext.getClipSamples = function (clip) {\n        if (clip.rawData) {\n            return clip.rawData.length;\n        }\n        return -1;\n    };\n\n    //\n    AudioContext.getClipChannels = function (clip) {\n        if (clip.rawData) {\n            return clip.rawData.numberOfChannels;\n        }\n        return -1;\n    };\n\n    //\n    AudioContext.getClipFrequency = function (clip) {\n        if (clip.rawData) {\n            return clip.rawData.sampleRate;\n        }\n        return -1;\n    };\n\n\n    Fire.AudioContext = AudioContext;\n})();\n\nFire._RFpop();\n},{}],\"sprite-animation-clip\":[function(require,module,exports){\nFire._RFpush();\n// sprite-animation-clip.js\n\n// 动画剪辑\n\nvar SpriteAnimationClip = Fire.extend('Fire.SpriteAnimationClip', Fire.CustomAsset, function () {\n    this._frameInfoFrames = null; // the array of the end frame of each frame info\n});\n\nFire.addCustomAssetMenu(SpriteAnimationClip, \"Create/New Sprite Animation\");\n\nSpriteAnimationClip.WrapMode = (function (t) {\n    t[t.Default = 0] = 'Default';\n    t[t.Once = 1] = 'Once';\n    t[t.Loop = 2] = 'Loop';\n    t[t.PingPong = 3] = 'PingPong';\n    t[t.ClampForever = 4] = 'ClampForever';\n    return t;\n})({});\n\nSpriteAnimationClip.StopAction = (function (t) {\n    t[t.DoNothing = 0] = 'DoNothing';         // do nothing\n    t[t.DefaultSprite = 1] = 'DefaultSprite'; // set to default sprite when the sprite animation stopped\n    t[t.Hide = 2] = 'Hide';                   // hide the sprite when the sprite animation stopped\n    t[t.Destroy = 3] = 'Destroy';             // destroy the entity the sprite belongs to when the sprite animation stopped\n    return t;\n})({});\n\n// ------------------------------------------------------------------\n/// The structure to descrip a frame in the sprite animation clip\n// ------------------------------------------------------------------\n\nvar FrameInfo = Fire.define('FrameInfo')\n                    .prop('sprite', null, Fire.ObjectType(Fire.Sprite))\n                    .prop('frames', 0, Fire.Integer);\n\n///< the list of frame info\n// to do\n\n// default wrap mode\nSpriteAnimationClip.prop('wrapMode', SpriteAnimationClip.WrapMode.Default, Fire.Enum(SpriteAnimationClip.WrapMode));\n\n// the default type of action used when the animation stopped\nSpriteAnimationClip.prop('stopAction', SpriteAnimationClip.StopAction.DoNothing, Fire.Enum(SpriteAnimationClip.StopAction));\n\n// the default speed of the animation clip\nSpriteAnimationClip.prop('speed', 1);\n\n// the sample rate used in this animation clip\nSpriteAnimationClip.prop('_frameRate', 60, Fire.HideInInspector);\nSpriteAnimationClip.getset('frameRate',\n    function () {\n        return this._frameRate;\n    },\n    function (value) {\n        if (value !== this._frameRate) {\n            this._frameRate = Math.round(Math.max(value, 1));\n        }\n    }\n);\n\nSpriteAnimationClip.prop('frameInfos', [], Fire.ObjectType(FrameInfo));\n\n\nSpriteAnimationClip.prototype.getTotalFrames = function () {\n    var frames = 0;\n    for (var i = 0; i < this.frameInfos.length; ++i) {\n        frames += this.frameInfos[i].frames;\n    }\n    return frames;\n};\n\nSpriteAnimationClip.prototype.getFrameInfoFrames = function () {\n    if (this._frameInfoFrames === null) {\n        this._frameInfoFrames = new Array(this.frameInfos.length);\n        var totalFrames = 0;\n        for (var i = 0; i < this.frameInfos.length; ++i) {\n            totalFrames += this.frameInfos[i].frames;\n            this._frameInfoFrames[i] = totalFrames;\n        }\n    }\n    return this._frameInfoFrames;\n};\n\nmodule.exports = SpriteAnimationClip;\n\nFire._RFpop();\n},{}],\"sprite-animation-state\":[function(require,module,exports){\nFire._RFpush();\n// sprite-animation-state.js\n\nvar SpriteAnimationClip = require('sprite-animation-clip');\n\nvar SpriteAnimationState = function (name, animClip) {\n    if (!animClip) {\n// @if DEV\n        Fire.error('Unspecified sprite animation clip');\n// @endif\n        return;\n    }\n    // the name of the sprite animation state\n    this.name = name;\n    // the referenced sprite sprite animation clip\n    this.clip = animClip;\n    // the wrap mode\n    this.wrapMode = animClip.wrapMode;\n    // the stop action\n    this.stopAction = animClip.stopAction;\n    // the speed to play the sprite animation clip\n    this.speed = animClip.speed;\n    // the array of the end frame of each frame info in the sprite animation clip\n    this._frameInfoFrames = animClip.getFrameInfoFrames();\n    // the total frame count of the sprite animation clip\n    this.totalFrames = this._frameInfoFrames.length > 0 ? this._frameInfoFrames[this._frameInfoFrames.length - 1] : 0;\n    // the length of the sprite animation in seconds with speed = 1.0f\n    this.length = this.totalFrames / animClip.frameRate;\n    // The current index of frame. The value can be larger than totalFrames.\n    // If the frame is larger than totalFrames it will be wrapped according to wrapMode. \n    this.frame = -1;\n    // the current time in seoncds\n    this.time = 0;\n    // cache result of GetCurrentIndex\n    this._cachedIndex = -1;\n};\n\n/**\n * @returns {number} - the current frame info index.\n */\nSpriteAnimationState.prototype.getCurrentIndex = function () {\n    if (this.totalFrames > 1) {\n        //int oldFrame = frame;\n        this.frame = Math.floor(this.time * this.clip.frameRate);\n        if (this.frame < 0) {\n            this.frame = -this.frame;\n        }\n\n        var wrappedIndex;\n        if (this.wrapMode !== SpriteAnimationClip.WrapMode.PingPong) {\n            wrappedIndex = _wrap(this.frame, this.totalFrames - 1, this.wrapMode);\n        }\n        else {\n            wrappedIndex = this.frame;\n            var cnt = Math.floor(wrappedIndex / this.totalFrames);\n            wrappedIndex %= this.totalFrames;\n            if ((cnt & 0x1) === 1) {\n                wrappedIndex = this.totalFrames - 1 - wrappedIndex;\n            }\n        }\n\n        // try to use cached frame info index\n        if (this._cachedIndex - 1 >= 0 &&\n            wrappedIndex >= this._frameInfoFrames[this._cachedIndex - 1] &&\n            wrappedIndex < this._frameInfoFrames[this._cachedIndex]) {\n            return this._cachedIndex;\n        }\n\n        // search frame info\n        var frameInfoIndex = _binarySearch(this._frameInfoFrames, wrappedIndex + 1);\n        if (frameInfoIndex < 0) {\n            frameInfoIndex = ~frameInfoIndex;\n        }\n        this._cachedIndex = frameInfoIndex;\n        return frameInfoIndex;\n    }\n    else if (this.totalFrames === 1) {\n        return 0;\n    }\n    else {\n        return -1;\n    }\n};\n\n// ------------------------------------------------------------------ \n/// C# Array.BinarySearch\n// ------------------------------------------------------------------ \nfunction _binarySearch (array, value) {\n    var l = 0, h = array.length - 1;\n    while (l <= h) {\n        var m = ((l + h) >> 1);\n        if (array[m] === value) {\n            return m;\n        }\n        if (array[m] > value) {\n            h = m - 1;\n        }\n        else {\n            l = m + 1;\n        }\n    }\n    return ~l;\n}\n\nfunction _wrap (_value, _maxValue, _wrapMode) {\n    if (_maxValue === 0) {\n        return 0;\n    }\n    if (_value < 0) {\n        _value = -_value;\n    }\n    if (_wrapMode === SpriteAnimationClip.WrapMode.Loop) {\n        return _value % (_maxValue + 1);\n    }\n    else if (_wrapMode === SpriteAnimationClip.WrapMode.PingPong) {\n        var cnt = Math.floor(_value / _maxValue);\n        _value %= _maxValue;\n        if (cnt % 2 === 1) {\n            return _maxValue - _value;\n        }\n    }\n    else {\n        if (_value < 0) {\n            return 0;\n        }\n        if (_value > _maxValue) {\n            return _maxValue;\n        }\n    }\n    return _value;\n}\n\nmodule.exports = SpriteAnimationState;\n\nFire._RFpop();\n},{\"sprite-animation-clip\":\"sprite-animation-clip\"}],\"sprite-animation\":[function(require,module,exports){\nFire._RFpush();\n// sprite-animation.js\n\nvar SpriteAnimationClip = require('sprite-animation-clip');\nvar SpriteAnimationState = require('sprite-animation-state');\n\n// 定义一个名叫Sprite Animation 组件\nvar SpriteAnimation = Fire.extend('Fire.SpriteAnimation', Fire.Component, function () {\n    this.animations = [];\n    this._nameToState = {};\n    this._curAnimation = null;\n    this._spriteRenderer = null;\n    this._defaultSprite = null;\n    this._lastFrameIndex = -1;\n    this._curIndex = -1;\n    this._playStartFrame = 0;// 在调用Play的当帧的LateUpdate不进行step\n});\n\nFire.addComponentMenu(SpriteAnimation, 'Sprite Animation');\n\nSpriteAnimation.prop('defaultAnimation', null , Fire.ObjectType(SpriteAnimationClip));\n\nSpriteAnimation.prop('animations', [], Fire.ObjectType(SpriteAnimationClip));\n\nSpriteAnimation.prop('_playAutomatically', true, Fire.HideInInspector);\nSpriteAnimation.getset('playAutomatically',\n    function () {\n        return this._playAutomatically;\n    },\n    function (value) {\n        this._playAutomatically = value;\n    }\n);\n\nSpriteAnimation.prototype.getAnimState = function (animClip) {\n\n    this._spriteRenderer = this.entity.getComponent(Fire.SpriteRenderer);\n\n    var newAnimState = new SpriteAnimationState(animClip.name, animClip);\n\n    return newAnimState;\n};\n\nSpriteAnimation.prototype.init = function () {\n    var initialized = (this.nameToState !== null);\n    if (initialized === false) {\n        this.sprite_ = this.entity.getComponent(Fire.Sprite);\n        this._defaultSprite = sprite_;\n\n        this.nameToState = {};\n        for (var i = 0; i < this.animations.length; ++i) {\n            var clip = this.animations[i];\n            if (clip !== null) {\n                var state = new SpriteAnimationState(clip);\n                this.nameToState[state.name] = state;\n                if (this.defaultAnimation === clip) {\n                    this.curAnimation = state;\n                    this.lastFrameIndex = -1;\n                }\n            }\n        }\n    }\n};\n\nSpriteAnimation.prototype.play = function (animState, time) {\n    this._curAnimation = animState;\n    if (this._curAnimation !== null) {\n        this._curIndex = -1;\n        this._curAnimation.time = time;\n        this._playStartFrame = Fire.Time.frameCount;\n        this.sample();\n    }\n};\n\nSpriteAnimation.prototype.onLoad = function () {\n    if (this.enabled) {\n        if (this._playAutomatically && this.defaultAnimation) {\n            var animState = this.getAnimState(this.defaultAnimation);\n            this.play(animState, 0);\n        }\n    }\n};\n\nSpriteAnimation.prototype.lateUpdate = function () {\n    if (this._curAnimation !== null && Fire.Time.frameCount > this._playStartFrame) {\n        var delta = Fire.Time.deltaTime * this._curAnimation.speed;\n        this.step(delta);\n    }\n};\n\nSpriteAnimation.prototype.step = function (deltaTime) {\n    if (this._curAnimation !== null) {\n        this._curAnimation.time += deltaTime;\n        this.sample();\n        var stop = false;\n        if (this._curAnimation.wrapMode === SpriteAnimationClip.WrapMode.Once ||\n            this._curAnimation.wrapMode === SpriteAnimationClip.WrapMode.Default ||\n            this._curAnimation.wrapMode === SpriteAnimationClip.WrapMode.ClampForever) {\n            if (this._curAnimation.speed > 0 && this._curAnimation.frame >= this._curAnimation.totalFrames) {\n                if (this._curAnimation.wrapMode === SpriteAnimationClip.WrapMode.ClampForever) {\n                    stop = false;\n                    this._curAnimation.frame = this._curAnimation.totalFrames;\n                    this._curAnimation.time = this._curAnimation.frame / this._curAnimation.clip.frameRate;\n                }\n                else {\n                    stop = true;\n                    this._curAnimation.frame = this._curAnimation.totalFrames;\n                }\n            }\n            else if (this._curAnimation.speed < 0 && this._curAnimation.frame < 0) {\n                if (this._curAnimation.wrapMode === SpriteAnimationClip.WrapMode.ClampForever) {\n                    stop = false;\n                    this._curAnimation.time = 0;\n                    this._curAnimation.frame = 0;\n                }\n                else {\n                    stop = true;\n                    this._curAnimation.frame = 0;\n                }\n            }\n        }\n\n        // do stop\n        if (stop) {\n            this.stop(this._curAnimation);\n        }\n    }\n    else {\n        this._curIndex = -1;\n    }\n};\n\nSpriteAnimation.prototype.sample = function () {\n    if (this._curAnimation !== null) {\n        var newIndex = this._curAnimation.getCurrentIndex();\n        if (newIndex >= 0 && newIndex != this._curIndex) {\n            this._spriteRenderer.sprite = this._curAnimation.clip.frameInfos[newIndex].sprite;\n        }\n        this._curIndex = newIndex;\n    }\n    else {\n        this._curIndex = -1;\n    }\n};\n\nSpriteAnimation.prototype.stop = function (animState) {\n    if ( animState !== null ) {\n        if (animState === this._curAnimation) {\n            this._curAnimation = null;\n        }\n        animState.time = 0;\n\n        var stopAction = animState.stopAction;\n        switch (stopAction) {\n            case SpriteAnimationClip.StopAction.DoNothing:\n                break;\n            case SpriteAnimationClip.StopAction.DefaultSprite:\n                this._spriteRenderer.sprite = this._defaultSprite;\n                break;\n            case SpriteAnimationClip.StopAction.Hide:\n                this._spriteRenderer.enabled = false;\n                break;\n            case SpriteAnimationClip.StopAction.Destroy:\n\n                break;\n            default:\n                break;\n        }\n        this._curAnimation = null;\n    }\n};\n\nmodule.exports = SpriteAnimation;\n\nFire._RFpop();\n},{\"sprite-animation-clip\":\"sprite-animation-clip\",\"sprite-animation-state\":\"sprite-animation-state\"}]},{},[\"audio-clip\",\"audio-legacy\",\"audio-source\",\"audio-web-audio\",\"sprite-animation-clip\",\"sprite-animation-state\",\"sprite-animation\",\"AudioControl\",\"Board\",\"Cell\",\"Cube\",\"CubeGroup\",\"Game\",\"GameMenu\",\"MainMenu\",\"Button\",\"Toggle\"]);\n"],"sourceRoot":"/source/"}